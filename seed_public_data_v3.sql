-- Simple and Safe Public Data Seed Script v3
-- This version uses actual club IDs and is more straightforward

-- 1. Add is_public column if needed
ALTER TABLE rounds ADD COLUMN IF NOT EXISTS is_public BOOLEAN DEFAULT false;

-- 2. Create dummy users
INSERT INTO users (id, email, name, handicap, bio) 
VALUES 
    ('00000000-0000-0000-0000-000000000001', 'pro_k@roundlog.com', '김프로', 3, 'KPGA 투어 프로를 꿈꾸는 열혈 골퍼입니다.'),
    ('00000000-0000-0000-0000-000000000002', 'newbie_lee@roundlog.com', '이백돌', 28, '이제 막 시작한 골린이입니다. 100타 깨기가 목표!'),
    ('00000000-0000-0000-0000-000000000003', 'mania_choi@roundlog.com', '최매니아', 12, '주말마다 라운딩 가는 필드 매니아입니다.'),
    ('00000000-0000-0000-0000-000000000004', 'single_park@roundlog.com', '박싱글', 7, '안정적인 싱글 플레이어를 지향합니다.')
ON CONFLICT (id) DO UPDATE SET 
    name = EXCLUDED.name,
    handicap = EXCLUDED.handicap,
    bio = EXCLUDED.bio;

-- 3. Create courses for SKY72 and 88CC
-- Using actual IDs from database: 
-- SKY72: 8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3
-- 88CC: aedbc4b5-6503-4af9-8b49-e5c9d0fafd0e

INSERT INTO golf_courses (id, golf_club_id, name, holes, total_par) VALUES
('00000000-0000-0000-0000-c00000000001', '8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3', '오션 코스', 18, 72),
('00000000-0000-0000-0000-c00000000002', '8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3', '하늘 코스', 18, 72),
('00000000-0000-0000-0000-c10000000001', 'aedbc4b5-6503-4af9-8b49-e5c9d0fafd0e', '동 코스', 18, 72),
('00000000-0000-0000-0000-c10000000002', 'aedbc4b5-6503-4af9-8b49-e5c9d0fafd0e', '서 코스', 18, 72)
ON CONFLICT (id) DO UPDATE SET
    name = EXCLUDED.name,
    holes = EXCLUDED.holes,
    total_par = EXCLUDED.total_par;

-- 4. Insert sample holes for Sky72 Ocean course
INSERT INTO golf_course_holes (course_id, hole, par, distances) VALUES
('00000000-0000-0000-0000-c00000000001', 1, 4, '{"white": 361, "red": 301}'),
('00000000-0000-0000-0000-c00000000001', 2, 4, '{"white": 328, "red": 290}'),
('00000000-0000-0000-0000-c00000000001', 3, 3, '{"white": 170, "red": 126}'),
('00000000-0000-0000-0000-c00000000001', 4, 4, '{"white": 295, "red": 273}'),
('00000000-0000-0000-0000-c00000000001', 5, 5, '{"white": 487, "red": 405}'),
('00000000-0000-0000-0000-c00000000001', 6, 4, '{"white": 328, "red": 279}'),
('00000000-0000-0000-0000-c00000000001', 7, 5, '{"white": 498, "red": 432}'),
('00000000-0000-0000-0000-c00000000001', 8, 3, '{"white": 175, "red": 148}'),
('00000000-0000-0000-0000-c00000000001', 9, 4, '{"white": 383, "red": 301}'),
('00000000-0000-0000-0000-c00000000001', 10, 4, '{"white": 383, "red": 328}'),
('00000000-0000-0000-0000-c00000000001', 11, 4, '{"white": 344, "red": 279}'),
('00000000-0000-0000-0000-c00000000001', 12, 3, '{"white": 202, "red": 175}'),
('00000000-0000-0000-0000-c00000000001', 13, 5, '{"white": 547, "red": 459}'),
('00000000-0000-0000-0000-c00000000001', 14, 4, '{"white": 399, "red": 323}'),
('00000000-0000-0000-0000-c00000000001', 15, 4, '{"white": 284, "red": 235}'),
('00000000-0000-0000-0000-c00000000001', 16, 4, '{"white": 432, "red": 372}'),
('00000000-0000-0000-0000-c00000000001', 17, 3, '{"white": 137, "red": 109}'),
('00000000-0000-0000-0000-c00000000001', 18, 5, '{"white": 558, "red": 453}')
ON CONFLICT (course_id, hole) DO NOTHING;

-- 5. Insert PUBLIC rounds with explicit IDs to prevent duplicates
INSERT INTO rounds (id, user_id, date, tee_time, club_id, club_name, course_id, course_name, total_score, hole_scores, is_public, weather, memo, green_fee, caddy_fee)
VALUES 
    -- Kim Pro rounds
    ('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '2026-02-01', '07:30', '8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3', 'SKY72 골프클럽(바다코스)', '00000000-0000-0000-0000-c00000000001', '오션 코스', 71, 
    '{"1": 4, "2": 4, "3": 2, "4": 4, "5": 5, "6": 4, "7": 5, "8": 3, "9": 4, "10": 4, "11": 4, "12": 3, "13": 5, "14": 4, "15": 4, "16": 4, "17": 3, "18": 5}', 
    true, '맑음', '언더파 달성! 아이언 샷감이 매우 좋았습니다.', 250000, 150000),
    
    ('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '2026-01-15', '11:45', 'aedbc4b5-6503-4af9-8b49-e5c9d0fafd0e', '88CC', '00000000-0000-0000-0000-c10000000001', '동 코스', 74,
    '{"1": 4, "2": 4, "3": 3, "4": 4, "5": 5, "6": 4, "7": 5, "8": 4, "9": 4, "10": 4, "11": 5, "12": 3, "13": 5, "14": 4, "15": 4, "16": 5, "17": 3, "18": 4}',
    true, '흐림', '그린 스피드가 빨라 퍼팅에서 고생했네요.', 210000, 150000),
    
    -- Lee Newbie rounds
    ('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000002', '2026-02-03', '13:20', '8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3', 'SKY72 골프클럽(바다코스)', '00000000-0000-0000-0000-c00000000002', '하늘 코스', 108,
    '{"1": 6, "2": 7, "3": 4, "4": 6, "5": 8, "6": 6, "7": 7, "8": 5, "9": 6, "10": 6, "11": 6, "12": 5, "13": 8, "14": 6, "15": 5, "16": 6, "17": 5, "18": 6}',
    true, '맑음', '첫 하늘코스! 경치는 좋았는데 공을 너무 많이 잃어버렸어요.', 230000, 150000),
    
    ('10000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000002', '2025-12-20', '08:15', 'aedbc4b5-6503-4af9-8b49-e5c9d0fafd0e', '88CC', '00000000-0000-0000-0000-c10000000002', '서 코스', 115,
    '{"1": 7, "2": 7, "3": 5, "4": 7, "5": 8, "6": 7, "7": 8, "8": 5, "9": 7, "10": 6, "11": 7, "12": 5, "13": 8, "14": 6, "15": 6, "16": 7, "17": 4, "18": 5}',
    true, '추움', '겨울 골프라 몸이 안 풀렸네요. 그래도 즐거웠습니다.', 180000, 140000),
    
    -- Choi Mania rounds
    ('10000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000003', '2026-02-02', '08:00', 'aedbc4b5-6503-4af9-8b49-e5c9d0fafd0e', '88CC', '00000000-0000-0000-0000-c10000000001', '동 코스', 85,
    '{"1": 5, "2": 5, "3": 4, "4": 5, "5": 5, "6": 4, "7": 5, "8": 3, "9": 5, "10": 5, "11": 5, "12": 4, "13": 5, "14": 5, "15": 5, "16": 5, "17": 4, "18": 6}',
    true, '맑음', '드라이버가 똑바로 가니 스코어가 따라오네요.', 210000, 150000),
    
    ('10000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000003', '2026-01-20', '10:30', '8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3', 'SKY72 골프클럽(바다코스)', '00000000-0000-0000-0000-c00000000001', '오션 코스', 89,
    '{"1": 5, "2": 5, "3": 4, "4": 6, "5": 5, "6": 5, "7": 6, "8": 3, "9": 5, "10": 5, "11": 5, "12": 4, "13": 6, "14": 5, "15": 5, "16": 5, "17": 4, "18": 6}',
    true, '바람', '바다코스답게 바람이 엄청났습니다.', 250000, 150000),
    
    -- Park Single round
    ('10000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000004', '2026-02-04', '06:45', '8ceba6f8-0cf8-49b4-a3e0-3aa89c3903a3', 'SKY72 골프클럽(바다코스)', '00000000-0000-0000-0000-c00000000001', '오션 코스', 78,
    '{"1": 4, "2": 5, "3": 3, "4": 4, "5": 5, "6": 4, "7": 5, "8": 3, "9": 4, "10": 4, "11": 5, "12": 4, "13": 5, "14": 4, "15": 5, "16": 5, "17": 4, "18": 5}',
    true, '맑음', '이른 아침 라운딩, 상쾌하고 좋았습니다.', 220000, 150000)
ON CONFLICT (id) DO UPDATE SET
    hole_scores = EXCLUDED.hole_scores,
    total_score = EXCLUDED.total_score,
    memo = EXCLUDED.memo,
    weather = EXCLUDED.weather;


